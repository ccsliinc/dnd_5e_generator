/* =================================================================
   D&D 5e Character Sheet - Stylesheet
   =================================================================

   STRUCTURE:
   1. CSS Variables (edit colors, sizes here - ONE place)
   2. Base Box Class (all boxes inherit from this)
   3. Corner Accents (4-corner decorative accents)
   4. Label Modifiers (top/bottom label positions)
   5. Layout Components (page, grid, columns)
   6. Specific Components (only unique overrides)

   ================================================================= */

/* -----------------------------------------------------------------
   1. CSS VARIABLES - Single source of truth
   ----------------------------------------------------------------- */
:root {
    /* Colors - Background */
    --bg-page: #ffffff;
    --bg-box: #faf8f5;
    --bg-label: #f5f0e6;

    /* Colors - Borders (warm brown tones) */
    --border-dark: #6b4423;
    --border-medium: #8b6b4a;
    --border-light: #c4a882;

    /* Colors - Text */
    --text-primary: #2a2a2a;
    --text-secondary: #555555;
    --text-label: #666666;

    /* Colors - Accents */
    --accent-primary: #8b4513;
    --accent-secondary: #c9a227;
    --accent-highlight: rgba(201, 162, 39, 0.15);

    /* Typography */
    --font-display: 'Cinzel', serif;
    --font-body: 'Scada', sans-serif;

    /* Font Sizes */
    --font-xs: 5.5pt;
    --font-sm: 6.5pt;
    --font-base: 7pt;
    --font-md: 8pt;
    --font-lg: 10pt;
    --font-xl: 16pt;
    --font-xxl: 20pt;

    /* Spacing */
    --gap-xs: 1mm;
    --gap-sm: 1.5mm;
    --gap-md: 2mm;
    --gap-lg: 3mm;

    /* Page Dimensions */
    --page-width: 210mm;
    --page-height: 297mm;
    --page-margin: 8mm;

    /* Box Styling */
    --box-radius: 0;
    --box-border-width: 1px;
    --box-padding: 2mm;

    /* Corner Accents */
    --corner-size: 4mm;
    --corner-color: var(--accent-secondary);
    --corner-width: 1px;
    --corner-offset: 2px;
}

/* -----------------------------------------------------------------
   2. BASE RESET & PAGE
   ----------------------------------------------------------------- */
* { margin: 0; padding: 0; box-sizing: border-box; }
@page {
    size: A4;
    margin: 0;
}

body {
    font-family: var(--font-body);
    font-size: 9pt;
    line-height: 1.3;
    color: var(--text-primary);
    background: #e0e0e0;
}

@media print {
    body { background: white !important; }
    .page {
        margin: 0 !important;
        box-shadow: none !important;
        height: 297mm !important;
        width: 210mm !important;
        background: white !important;
    }
    /* Preserve box gradients, labels, and coin colors when printing */
    .box,
    .box__label,
    .coin-icon {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
    }
}

.page {
    width: var(--page-width);
    height: var(--page-height);
    margin: 10mm auto;
    padding: var(--page-margin);
    background: var(--bg-page);
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    position: relative;
    overflow: hidden;
    page-break-after: always;
    display: flex;
    flex-direction: column;
}
.page:last-child { page-break-after: avoid; }

/* -----------------------------------------------------------------
   3. BASE BOX CLASS - All boxes inherit from this
   ----------------------------------------------------------------- */
.box {
    border: var(--box-border-width) solid var(--border-dark);
    border-radius: var(--box-radius);
    background:
        /* Corner aging - old paper effect with white center */
        radial-gradient(ellipse 50% 50% at 0% 0%, #f0ebe3 0%, transparent 55%),
        radial-gradient(ellipse 50% 50% at 100% 0%, #f0ebe3 0%, transparent 55%),
        radial-gradient(ellipse 50% 50% at 0% 100%, #f0ebe3 0%, transparent 55%),
        radial-gradient(ellipse 50% 50% at 100% 100%, #f0ebe3 0%, transparent 55%),
        #ffffff;
    position: relative;
}

/* -----------------------------------------------------------------
   4. CORNER ACCENTS - Faded notch effect on all 4 corners
   Creates elegant "ticket stub" look with fading corner lines
   ----------------------------------------------------------------- */
.box::before {
    content: '';
    position: absolute;
    inset: var(--corner-offset);
    pointer-events: none;
    z-index: 1;
    background:
        /* Top-left horizontal - fades right */
        linear-gradient(to right, var(--corner-color), transparent)
            0 0 / var(--corner-size) var(--corner-width) no-repeat,
        /* Top-left vertical - fades down */
        linear-gradient(to bottom, var(--corner-color), transparent)
            0 0 / var(--corner-width) var(--corner-size) no-repeat,
        /* Top-right horizontal - fades left */
        linear-gradient(to left, var(--corner-color), transparent)
            100% 0 / var(--corner-size) var(--corner-width) no-repeat,
        /* Top-right vertical - fades down */
        linear-gradient(to bottom, var(--corner-color), transparent)
            100% 0 / var(--corner-width) var(--corner-size) no-repeat,
        /* Bottom-left horizontal - fades right */
        linear-gradient(to right, var(--corner-color), transparent)
            0 100% / var(--corner-size) var(--corner-width) no-repeat,
        /* Bottom-left vertical - fades up */
        linear-gradient(to top, var(--corner-color), transparent)
            0 100% / var(--corner-width) var(--corner-size) no-repeat,
        /* Bottom-right horizontal - fades left */
        linear-gradient(to left, var(--corner-color), transparent)
            100% 100% / var(--corner-size) var(--corner-width) no-repeat,
        /* Bottom-right vertical - fades up */
        linear-gradient(to top, var(--corner-color), transparent)
            100% 100% / var(--corner-width) var(--corner-size) no-repeat;
}

/* -----------------------------------------------------------------
   4.5 UTILITY CLASSES
   ----------------------------------------------------------------- */

/* Flex utilities */
.flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

.flex-col {
    display: flex;
    flex-direction: column;
}

/* Reference card base - used by weapon, spell, feature cards */
.ref-card {
    margin-bottom: 2.5mm;
    padding-bottom: 2mm;
    border-bottom: 1px dashed var(--border-light);
}
.ref-card:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

/* Styled list base - used by item-list and prof-list */
.styled-list {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: var(--font-base);
    line-height: 1.4;
}
.styled-list li {
    padding: 0.3mm 0;
    padding-left: 3mm;
    position: relative;
}
.styled-list li::before {
    content: '◆';
    color: var(--accent-secondary);
    font-size: 5pt;
    position: absolute;
    left: 0;
    top: 0.5mm;
}

/* Two-column list variant */
.styled-list--columns {
    column-count: 2;
    column-gap: var(--gap-lg);
}
.styled-list--columns li {
    break-inside: avoid;
}

/* -----------------------------------------------------------------
   5. LABEL MODIFIERS - Position labels top or bottom
   ----------------------------------------------------------------- */

/* Label at bottom of box */
.box__label {
    font-size: 6pt;
    font-weight: 700;
    text-transform: uppercase;
    text-align: center;
    letter-spacing: 0.3px;
    color: var(--text-secondary);
    background: var(--bg-label);
    padding: 0.5mm 2mm;
}

.box--label-bottom {
    padding-bottom: 5mm;
}
.box--label-bottom > .box__label {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    border-top: var(--box-border-width) solid var(--border-light);
    border-radius: 0 0 var(--box-radius) var(--box-radius);
}

/* Label at top of box */
.box--label-top {
    padding-top: 6mm !important;
}
.box--label-top > .box__label {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    border-bottom: var(--box-border-width) solid var(--border-light);
    border-radius: var(--box-radius) var(--box-radius) 0 0;
}

/* Centered content */
.box--centered {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* -----------------------------------------------------------------
   6. COMMON VALUE STYLES
   ----------------------------------------------------------------- */
.value--large {
    font-family: var(--font-display);
    font-size: 16pt;
    font-weight: 700;
    line-height: 1;
}

.value--xlarge {
    font-family: var(--font-display);
    font-size: 18pt;
    font-weight: 700;
}

.value--medium {
    font-size: 11pt;
    font-weight: 600;
}

/* -----------------------------------------------------------------
   6.5 TEXT CONTENT STYLES - Paragraphs and lists
   ----------------------------------------------------------------- */

/* Justified text with paragraph indentation */
.text-content {
    font-size: 7.5pt;
    line-height: 1.5;
    text-align: justify;
    hyphens: auto;
}

.text-content p {
    text-indent: 4mm;
    margin-bottom: 1mm;
}

/* Generic item list - extends styled-list */
.item-list {
    /* Inherits from styled-list */
}

/* Two-column list variant */
.item-list--columns {
    /* Inherits from styled-list--columns */
}

/* -----------------------------------------------------------------
   7. PAGE HEADER
   ----------------------------------------------------------------- */
.page-header {
    display: grid;
    grid-template-columns: 75mm 1fr;
    gap: 3mm;
    margin-bottom: 3mm;
}

.header-left {
    display: flex;
    flex-direction: column;
}

.header-brand {
    font-family: var(--font-display);
    font-size: 7pt;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--text-secondary);
    margin-bottom: 1mm;
}

.header-name-row {
    display: flex;
    gap: 2mm;
    flex: 1;
}

.portrait-frame {
    width: 20mm;
    height: 20mm;
    border: var(--box-border-width) solid var(--border-dark);
    background: var(--bg-box);
    overflow: hidden;
    flex-shrink: 0;
}

.portrait-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.header-name {
    padding: 2mm 3mm 6mm;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
}
.header-name .value--large {
    text-align: center;
}

.header-right {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: 1fr 1fr;
    gap: 1.5mm;
}

.info-field {
    padding: 1mm 2mm 5mm;
}

/* -----------------------------------------------------------------
   8. MAIN CONTENT LAYOUT
   ----------------------------------------------------------------- */
.main-content {
    display: grid;
    grid-template-columns: 62mm 1fr 52mm;
    gap: 2mm;
    flex: 1;
}

.column {
    display: flex;
    flex-direction: column;
    gap: 1.5mm;
}

.left-section {
    display: grid;
    grid-template-columns: 20mm 1fr;
    gap: 1.5mm;
}

.abilities-column {
    display: flex;
    flex-direction: column;
    gap: 1mm;
}

.stats-column {
    display: flex;
    flex-direction: column;
    gap: 1.5mm;
}

/* -----------------------------------------------------------------
   9. ABILITY SCORES
   ----------------------------------------------------------------- */
.ability-block {
    display: flex;
    flex-direction: column;
    gap: 1mm;
}

.ability-score {
    padding: 1mm 1.5mm 1.5mm;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.ability-score .box__label {
    font-size: 5pt;
    margin: -1mm -1.5mm 0.5mm;
    width: calc(100% + 3mm);
    border-bottom: var(--box-border-width) solid var(--border-light);
    border-radius: var(--box-radius) var(--box-radius) 0 0;
}

.ability-modifier {
    width: 10mm;
    height: 6mm;
    border: var(--box-border-width) solid var(--border-dark);
    border-radius: 0 0 5mm 5mm;
    background: var(--bg-box);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 9pt;
    font-weight: 700;
    margin-top: 0.5mm;
}

/* -----------------------------------------------------------------
   10. STAT ROWS (Inspiration, Proficiency Bonus)
   ----------------------------------------------------------------- */
.stat-row {
    display: flex;
    align-items: center;
    gap: 2mm;
    padding: 1.5mm 2mm;
}

.stat-circle {
    width: 7mm;
    height: 7mm;
    border: var(--box-border-width) solid var(--border-dark);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 9pt;
    font-weight: 700;
    background: var(--bg-box);
}

.stat-label {
    font-size: 6.5pt;
    font-weight: 700;
    text-transform: uppercase;
}

/* -----------------------------------------------------------------
   11. SAVES & SKILLS
   ----------------------------------------------------------------- */
.saves-skills-box {
    padding: 1.5mm;
}
.saves-skills-box.box--flex { flex: 1; }

.save-row, .skill-row {
    display: flex;
    align-items: center;
    gap: 1mm;
    padding: 0.3mm 0;
    font-size: 7pt;
}

.prof-circle {
    width: 3mm;
    height: 3mm;
    border: 1px solid var(--border-dark);
    border-radius: 50%;
}
.prof-circle.filled { background: var(--border-dark); }

.save-mod, .skill-mod {
    width: 5mm;
    font-weight: 700;
    text-align: right;
    font-size: 7pt;
}

.skill-ability {
    font-size: 5.5pt;
    color: var(--text-label);
}

/* -----------------------------------------------------------------
   12. PASSIVE PERCEPTION
   ----------------------------------------------------------------- */
.passive-box {
    padding: 1.5mm;
    display: flex;
    align-items: center;
    gap: 2mm;
}

.passive-value {
    width: 8mm;
    height: 8mm;
    border: var(--box-border-width) solid var(--border-dark);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10pt;
    font-weight: 700;
    background: var(--bg-box);
}

.passive-label {
    font-size: 6pt;
    font-weight: 700;
    text-transform: uppercase;
    line-height: 1.2;
}

/* -----------------------------------------------------------------
   13. PROFICIENCIES LIST
   ----------------------------------------------------------------- */
.proficiencies-box {
    padding: var(--box-padding) var(--box-padding) 5mm;
    flex: 1;
}

/* Proficiencies - extends styled-list with columns */
.prof-list {
    column-count: 2;
    column-gap: var(--gap-lg);
}
.prof-list li {
    padding: 0.2mm 0;
    break-inside: avoid;
}

/* -----------------------------------------------------------------
   14. COMBAT STATS
   ----------------------------------------------------------------- */
.combat-row {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 2mm;
}

.combat-stat {
    padding: 1mm 2mm 4mm;
    text-align: center;
}

.combat-value {
    min-height: 10mm;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* -----------------------------------------------------------------
   15. HP SECTIONS
   ----------------------------------------------------------------- */
.hp-section {
    padding: 2mm 2mm 4mm;
}

.hp-max-row {
    display: flex;
    align-items: center;
    gap: 2mm;
    margin-bottom: 1mm;
    padding-bottom: 1mm;
    border-bottom: 1px solid var(--border-light);
}

.hp-max-label {
    font-size: 5.5pt;
    font-weight: 700;
    text-transform: uppercase;
}

.hp-max-value {
    flex: 1;
    font-size: 11pt;
    font-weight: 700;
    text-align: center;
}

.hp-current {
    min-height: 12mm;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-display);
    font-size: 20pt;
    font-weight: 700;
}

.hp-temp {
    padding: 2mm 2mm 4mm;
}

.hp-temp-value {
    min-height: 6mm;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12pt;
    font-weight: 700;
}

/* -----------------------------------------------------------------
   16. HIT DICE & DEATH SAVES
   ----------------------------------------------------------------- */
.hitdice-death-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2mm;
}

.hitdice-box, .death-box {
    padding: 1.5mm 1.5mm 4mm;
}

.hitdice-total {
    font-size: 5.5pt;
    color: var(--text-label);
}

.hitdice-value {
    font-size: 10pt;
    font-weight: 700;
    text-align: center;
    min-height: 6mm;
    display: flex;
    align-items: center;
    justify-content: center;
}

.death-row {
    display: flex;
    align-items: center;
    gap: 1mm;
    font-size: 6pt;
    margin-bottom: 1mm;
}

.death-label { width: 12mm; }

.death-circles { display: flex; gap: 1mm; }

.death-circle {
    width: 3.5mm;
    height: 3.5mm;
    border: 1.5px solid var(--border-dark);
    border-radius: 50%;
}

/* -----------------------------------------------------------------
   17. ATTACKS BOX
   ----------------------------------------------------------------- */
.attacks-box {
    padding: 1.5mm;
}

.attack-header {
    display: grid;
    grid-template-columns: 1.3fr 0.8fr 1.8fr;
    gap: 1mm;
    font-size: 5.5pt;
    font-weight: 700;
    text-transform: uppercase;
    color: var(--text-label);
    padding-bottom: 1mm;
    border-bottom: 1px solid var(--border-light);
    margin-bottom: 1mm;
}

.attack-row {
    display: grid;
    grid-template-columns: 1.3fr 0.8fr 1.8fr;
    gap: 1mm;
    padding: 0.5mm 0;
    font-size: 7pt;
    border-bottom: 1px solid #eee;
    min-height: 5mm;
}

.attack-name {
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.attack-bonus {
    text-align: center;
    white-space: nowrap;
}
.attack-damage {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* -----------------------------------------------------------------
   18. EQUIPMENT BOX
   ----------------------------------------------------------------- */
.equipment-box {
    padding: var(--box-padding) var(--box-padding) 5mm;
    flex: 1;
}

.equipment-box .box-content {
    font-size: 7pt;
    line-height: 1.3;
    margin-top: 1mm;
}

.coin-row {
    display: flex;
    justify-content: space-around;
    padding: 2mm 1mm;
    border-bottom: 1px solid var(--border-light);
    margin-bottom: 1mm;
}

.coin {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5mm;
}

.coin-icon {
    width: 8mm;
    height: 8mm;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 8pt;
    font-weight: 700;
    position: relative;
    box-shadow: inset 0 1px 2px rgba(255,255,255,0.4), inset 0 -1px 2px rgba(0,0,0,0.2), 0 1px 2px rgba(0,0,0,0.15);
}

/* Coin inner ring detail */
.coin-icon::before {
    content: '';
    position: absolute;
    width: 6mm;
    height: 6mm;
    border-radius: 50%;
    border: 0.3mm solid rgba(0,0,0,0.15);
}

/* Copper - brown/orange tones */
.coin--cp .coin-icon {
    background: linear-gradient(145deg, #cd7f32, #b87333);
    border: 0.5mm solid #8b4513;
    color: #4a2800;
}

/* Silver - gray/white tones */
.coin--sp .coin-icon {
    background: linear-gradient(145deg, #e8e8e8, #c0c0c0);
    border: 0.5mm solid #808080;
    color: #404040;
}

/* Electrum - pale gold/silver mix */
.coin--ep .coin-icon {
    background: linear-gradient(145deg, #e6d5a8, #c9b896);
    border: 0.5mm solid #9a8b6e;
    color: #5a4f3a;
}

/* Gold - rich gold tones */
.coin--gp .coin-icon {
    background: linear-gradient(145deg, #ffd700, #daa520);
    border: 0.5mm solid #b8860b;
    color: #654321;
}

/* Platinum - bright silver/white */
.coin--pp .coin-icon {
    background: linear-gradient(145deg, #f5f5f5, #e5e4e2);
    border: 0.5mm solid #a9a9a9;
    color: #505050;
}

.coin-value {
    font-size: 7pt;
    font-weight: 700;
    color: var(--text-primary);
}

.coin-label {
    font-size: 5pt;
    font-weight: 700;
    color: var(--text-label);
    text-transform: uppercase;
    letter-spacing: 0.3px;
}

/* -----------------------------------------------------------------
   19. TRAIT BOXES (Right Column)
   ----------------------------------------------------------------- */
.trait-box {
    padding: var(--box-padding) var(--box-padding) 5mm;
}
.trait-box.box--flex { flex: 1; }

.trait-content {
    font-size: 7pt;
    line-height: 1.3;
}

/* -----------------------------------------------------------------
   20. PAGE 2 - BACKGROUND
   ----------------------------------------------------------------- */
.page2-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3mm;
    flex: 1;
}

.page2-grid .column {
    display: flex;
    flex-direction: column;
    gap: 2mm;
}

.large-box {
    padding: var(--box-padding);
}
.large-box.box--flex { flex: 1; }

.large-box-content {
    font-size: 7.5pt;
    line-height: 1.4;
}

/* Notes box with lined paper effect */
.notes-box {
    min-height: 25mm;
    display: flex;
    flex-direction: column;
}
.notes-box.box--flex { flex: 1; }

.notes-box > .box__label {
    flex-shrink: 0;
}

.notes-lines {
    flex: 1;
    min-height: 20mm;
    background-image: repeating-linear-gradient(
        to bottom,
        transparent 0,
        transparent 5.5mm,
        #c4beb3 5.5mm,
        #c4beb3 6mm
    );
    background-position: 0 2mm;
}

/* Page 2 alternate layout with full-width notes row */
.page2-content {
    display: flex;
    flex-direction: column;
    flex: 1;
    gap: 3mm;
}

.page2-columns {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3mm;
    flex: 1;
}

.page2-columns .column {
    display: flex;
    flex-direction: column;
    gap: 2mm;
}

.page2-notes-row {
    width: 100%;
}

/* -----------------------------------------------------------------
   21. PAGE 3 - SPELLCASTING
   ----------------------------------------------------------------- */
.spell-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-auto-rows: 1fr;
    gap: 2mm;
    flex: 1;
}

.spell-level-box {
    padding: var(--box-padding);
    display: flex;
    flex-direction: column;
}

.spell-level-header {
    display: flex;
    align-items: center;
    gap: 2mm;
    margin-bottom: 1.5mm;
    padding-bottom: 1mm;
    border-bottom: 1px solid var(--border-light);
}

.spell-level-num {
    width: 7mm;
    height: 7mm;
    background: var(--bg-label);
    color: var(--text-primary);
    border: var(--box-border-width) solid var(--border-dark);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-display);
    font-size: 10pt;
    font-weight: 700;
    border-radius: var(--box-radius);
}

.spell-slots {
    display: flex;
    flex-direction: column;
    gap: 0.5mm;
    font-size: 5.5pt;
}

.spell-slots-row {
    display: flex;
    align-items: center;
    gap: 1mm;
}

.spell-slot-box {
    width: 5mm;
    height: 4mm;
    border: 1px solid var(--border-dark);
    border-radius: 2px;
    font-size: 6pt;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
}

.spell-list {
    font-size: 7pt;
    line-height: 1.4;
    flex: 1;
    display: flex;
    flex-direction: column;
}

.spell-item {
    display: flex;
    align-items: center;
    gap: 1.5mm;
    padding: 0.8mm 0;
    min-height: 4mm;
    border-bottom: 1px solid #ddd;
}

.spell-prepared {
    width: 3mm;
    height: 3mm;
    border: 1px solid var(--border-dark);
    border-radius: 50%;
}
.spell-prepared.filled { background: var(--border-dark); }

/* Cantrip special styling */
.cantrip-box .spell-level-num {
    background: var(--accent-highlight);
    border-color: var(--accent-primary);
    color: var(--accent-primary);
}

/* -----------------------------------------------------------------
   22. PAGE 4 - REFERENCE / CHEAT SHEET
   ----------------------------------------------------------------- */
.page4-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3mm;
    flex: 1;
}

.page4-grid .column {
    display: flex;
    flex-direction: column;
    gap: 2mm;
}

/* Reference section boxes */
.ref-box {
    padding: var(--box-padding);
}
.ref-box.box--flex { flex: 1; }

.ref-section-title {
    font-family: var(--font-display);
    font-size: 9pt;
    font-weight: 700;
    color: var(--accent-primary);
    margin-bottom: 2mm;
    padding-bottom: 1mm;
    border-bottom: 1px solid var(--border-light);
}

/* Weapon reference cards - extends ref-card */
.weapon-card {
    /* Uses ref-card base styles */
}

.weapon-name {
    font-weight: 700;
    font-size: 8pt;
    color: var(--text-primary);
}

.weapon-type {
    font-size: 6pt;
    color: var(--text-label);
    font-style: italic;
}

.weapon-stats {
    display: flex;
    gap: 3mm;
    margin-top: 0.5mm;
    font-size: 7pt;
}

.weapon-damage {
    font-weight: 600;
    color: var(--accent-primary);
}

.weapon-properties {
    font-size: 6pt;
    color: var(--text-secondary);
    margin-top: 0.5mm;
}

.weapon-notes {
    font-size: 6pt;
    color: var(--text-label);
    font-style: italic;
    margin-top: 0.5mm;
}

/* Spell reference cards - extends ref-card */
.spell-card {
    /* Uses ref-card base styles */
}

.spell-name {
    font-weight: 700;
    font-size: 8pt;
    color: var(--text-primary);
}

.spell-level-tag {
    font-size: 6pt;
    color: var(--accent-primary);
    font-weight: 600;
}

.spell-meta {
    display: flex;
    gap: 2mm;
    margin-top: 0.5mm;
    font-size: 6pt;
    color: var(--text-label);
}

.spell-meta span {
    display: flex;
    gap: 0.5mm;
}

.spell-meta-label {
    font-weight: 600;
}

.spell-desc {
    font-size: 7pt;
    line-height: 1.4;
    margin-top: 1mm;
    text-align: justify;
}

/* Feature reference cards - extends ref-card with smaller margins */
.feature-card {
    margin-bottom: var(--gap-md);
    padding-bottom: var(--gap-sm);
}

.feature-name {
    font-weight: 700;
    font-size: 7.5pt;
    color: var(--accent-primary);
}

.feature-desc {
    font-size: 6.5pt;
    line-height: 1.4;
    margin-top: 0.5mm;
}

/* Companion stat block */
.companion-block {
    padding: var(--box-padding);
}

.companion-header-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1.5mm;
    padding-bottom: 1mm;
    border-bottom: 2px solid var(--accent-primary);
}

.companion-header {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.companion-portrait {
    width: 18mm;
    height: 18mm;
    overflow: hidden;
    border: 1px solid var(--border-medium);
    flex-shrink: 0;
}

.companion-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.companion-name {
    font-family: var(--font-display);
    font-size: 10pt;
    font-weight: 700;
    color: var(--accent-primary);
}

.companion-type {
    font-size: 6.5pt;
    font-style: italic;
    color: var(--text-secondary);
}

.companion-stats-row {
    display: flex;
    gap: 2mm;
    margin: 1mm 0;
    font-size: 6.5pt;
}

.companion-stat {
    display: flex;
    gap: 1mm;
}

.companion-stat-label {
    font-weight: 700;
    color: var(--accent-primary);
}

.companion-abilities {
    display: flex;
    justify-content: space-between;
    margin: 1mm 0;
    padding: 1mm 1.5mm;
    background: var(--bg-label);
    border-radius: var(--box-radius);
}

.companion-ability {
    text-align: center;
}

.companion-ability-name {
    font-size: 5.5pt;
    font-weight: 700;
    color: var(--text-label);
}

.companion-ability-score {
    font-size: 8pt;
    font-weight: 700;
}

.companion-ability-mod {
    font-size: 6pt;
    color: var(--text-secondary);
}

.companion-section {
    margin-top: 1.5mm;
}

.companion-section-title {
    font-weight: 700;
    font-size: 6.5pt;
    color: var(--accent-primary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 0.5mm;
    padding-bottom: 0.5mm;
    border-bottom: 1px solid var(--border-light);
}

.companion-trait {
    margin-bottom: 1mm;
}

.companion-trait-name {
    font-weight: 700;
    font-size: 6.5pt;
    font-style: italic;
}

.companion-trait-desc {
    font-size: 6pt;
    line-height: 1.25;
}

.companion-action {
    margin-bottom: 1mm;
}

.companion-action-name {
    font-weight: 700;
    font-size: 6.5pt;
    font-style: italic;
}

.companion-action-desc {
    font-size: 6pt;
    line-height: 1.25;
}

.companion-commands {
    font-size: 6pt;
    line-height: 1.3;
    list-style: none;
    padding: 0;
    margin: 0;
}

.companion-commands li {
    margin-bottom: 0.3mm;
    padding-left: 2.5mm;
    position: relative;
}

.companion-commands li::before {
    content: '•';
    color: var(--accent-primary);
    position: absolute;
    left: 0;
    top: 0;
}

/* =================================================================
   GALLERY ROW - Page 1 Bottom
   ================================================================= */

.gallery-row {
    display: flex;
    justify-content: center;
    gap: 3mm;
    margin-top: 2mm;
    padding: 1mm 0;
}

.gallery-item {
    width: 28mm;
    height: 28mm;
    overflow: hidden;
    border: 1px solid var(--border-medium);
    background: var(--bg-box);
    position: relative;
}

/* Corner accents for gallery items */
.gallery-item::before {
    content: '';
    position: absolute;
    top: var(--corner-offset);
    left: var(--corner-offset);
    width: var(--corner-size);
    height: var(--corner-size);
    border-top: var(--corner-width) solid var(--corner-color);
    border-left: var(--corner-width) solid var(--corner-color);
    z-index: 1;
}

.gallery-item::after {
    content: '';
    position: absolute;
    bottom: var(--corner-offset);
    right: var(--corner-offset);
    width: var(--corner-size);
    height: var(--corner-size);
    border-bottom: var(--corner-width) solid var(--corner-color);
    border-right: var(--corner-width) solid var(--corner-color);
    z-index: 1;
}

.gallery-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* =================================================================
   TURN STRUCTURE & COMBAT REFERENCE - Page 4
   ================================================================= */

/* Turn Structure Box */
.turn-box {
    padding: var(--box-padding);
}

.turn-phase {
    display: flex;
    align-items: flex-start;
    gap: 2mm;
    margin-bottom: 1.5mm;
    padding-bottom: 1mm;
    border-bottom: 1px dotted var(--border-light);
}

.turn-phase:last-of-type {
    margin-bottom: 1.5mm;
}

.turn-phase-name {
    font-weight: 700;
    font-size: 7pt;
    color: var(--accent-primary);
    min-width: 18mm;
    flex-shrink: 0;
}

.turn-phase-desc {
    font-size: 6.5pt;
    line-height: 1.3;
    color: var(--text-secondary);
}

.turn-reaction {
    display: flex;
    align-items: flex-start;
    gap: 2mm;
    margin-top: 1mm;
}

/* Combat Reference Box */
.combat-ref-box {
    padding: var(--box-padding);
}

.combat-action {
    display: flex;
    align-items: flex-start;
    gap: 2mm;
    margin-bottom: 1mm;
    font-size: 6.5pt;
}

.combat-action-name {
    font-weight: 700;
    color: var(--text-primary);
    min-width: 16mm;
    flex-shrink: 0;
}

.combat-action-desc {
    color: var(--text-secondary);
    line-height: 1.3;
}

.combat-condition {
    display: flex;
    align-items: flex-start;
    gap: 2mm;
    margin-bottom: 1mm;
    font-size: 6.5pt;
}

.combat-condition-name {
    font-weight: 700;
    color: var(--accent-primary);
    min-width: 16mm;
    flex-shrink: 0;
}

.combat-condition-desc {
    color: var(--text-secondary);
    line-height: 1.3;
}

.combat-cover {
    display: flex;
    align-items: center;
    gap: 2mm;
    margin-bottom: 0.5mm;
    font-size: 6.5pt;
}

.combat-cover-type {
    font-weight: 700;
    color: var(--text-primary);
    min-width: 22mm;
}

.combat-cover-bonus {
    color: var(--accent-primary);
    font-weight: 600;
}
